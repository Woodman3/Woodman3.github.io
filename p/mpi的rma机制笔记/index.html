<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="介绍 Remote Memory Accese（RMA）是MPI中的一种单边通信机制。具体来说，类似于cuda的统一内存，MPI划出了一块内存空间，称之为窗口（window），所有的进程都可以访问或修改这一块内存并且不需要显示的同步操作。\n"><title>MPI的RMA机制笔记</title><link rel=canonical href=https://woodman3.github.io/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/><link rel=stylesheet href=/scss/style.min.6fb64519ea3cb3250aaa12d52bc774378a2438bf8dbb4dc5541233af79db5170.css><meta property='og:title' content="MPI的RMA机制笔记"><meta property='og:description' content="介绍 Remote Memory Accese（RMA）是MPI中的一种单边通信机制。具体来说，类似于cuda的统一内存，MPI划出了一块内存空间，称之为窗口（window），所有的进程都可以访问或修改这一块内存并且不需要显示的同步操作。\n"><meta property='og:url' content='https://woodman3.github.io/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/'><meta property='og:site_name' content='木头人的小木屋'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='hpc'><meta property='article:tag' content='mpi'><meta property='article:published_time' content='2024-06-26T13:59:16+08:00'><meta property='article:modified_time' content='2024-06-26T13:59:16+08:00'><meta property='og:image' content='https://woodman3.github.io/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/119833826_p0.jpg'><meta name=twitter:title content="MPI的RMA机制笔记"><meta name=twitter:description content="介绍 Remote Memory Accese（RMA）是MPI中的一种单边通信机制。具体来说，类似于cuda的统一内存，MPI划出了一块内存空间，称之为窗口（window），所有的进程都可以访问或修改这一块内存并且不需要显示的同步操作。\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://woodman3.github.io/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/119833826_p0.jpg'><link rel="shortcut icon" href=/wood-cabin.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_d3f2aa0dd40b3fb2.jpg width=300 height=259 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🪵</span></figure><div class=site-meta><h1 class=site-name><a href=/>木头人的小木屋</a></h1><h2 class=site-description>人生南北多歧路，时代喧哗造物忙。</h2></div></header><ol class=menu-social><li><a href=https://github.com/Woodman3 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-user"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/cd/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-disc"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1018 0A9 9 0 103 12"/><path d="M12 12m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M7 12a5 5 0 015-5"/><path d="M12 17a5 5 0 005-5"/></svg>
<span>Disc</span></a></li><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/%E5%8F%8B%E9%93%BE/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#介绍>介绍</a></li><li><a href=#初始化>初始化</a><ol><li><a href=#mpi_win_create>MPI_WIN_CREATE</a></li><li><a href=#mpi_win_allocate>MPI_WIN_ALLOCATE</a></li><li><a href=#mpi_win_allocate_shared>MPI_WIN_ALLOCATE_SHARED</a></li></ol></li><li><a href=#通信>通信</a></li><li><a href=#内存模型>内存模型</a><ol><li><a href=#separate-model>separate model</a></li><li><a href=#unified-model>unified model</a></li></ol></li><li><a href=#同步>同步</a><ol><li><a href=#时期epoch>时期（epoch）</a></li><li><a href=#pscwpost-start-complete-wait>PSCW(Post-Start-Complete-Wait)</a></li><li><a href=#fence>Fence</a></li><li><a href=#lock>Lock</a></li></ol></li><li><a href=#参考>参考</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/119833826_p0_hu_e6fad3a3b1f677b4.jpg srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/119833826_p0_hu_e6fad3a3b1f677b4.jpg 800w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/119833826_p0_hu_99e94ab81fc9a8d6.jpg 1600w" width=800 height=1131 loading=lazy alt="Featured image of post MPI的RMA机制笔记"></a></div><div class=article-details><header class=article-category><a href=/categories/%E5%AD%A6%E4%B9%A0/>学习</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/>MPI的RMA机制笔记</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2024-06-26T13:59:16+08:00>Jun 26, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 5 分钟</time></div></footer></div></header><section class=article-content><h2 id=介绍>介绍</h2><p>Remote Memory Accese（RMA）是MPI中的一种单边通信机制。具体来说，类似于cuda的统一内存，MPI划出了一块内存空间，称之为窗口（window），所有的进程都可以访问或修改这一块内存并且不需要显示的同步操作。</p><p>在下文中，我将遵循MPI标准中的定义，以源（origin）或源进程来指代调用RMA操作的进程，以目标（target）或目标进程来指代被访问内存的进程。</p><h2 id=初始化>初始化</h2><p>MPI提供了四种初始化函数，如下：</p><blockquote><p><strong>MPI_WIN_CREATE</strong> 每个调用此函数的进程都会暴露一块已经被本地分配的内存。</p><p><strong>MPI_WIN_ALLOCATE</strong> 与上一个的不同在于，用户不需要提前分配好内存。</p><p><strong>MPI_WIN_ALLOCATE_SHARED</strong> 在上一个的基础上，其他进程可以直接读写window。</p><p><strong>MPI_WIN_CREATE_DYNAMIC</strong> 创建出的内存大小是动态的。</p></blockquote><h3 id=mpi_win_create>MPI_WIN_CREATE</h3><blockquote><p>MPI_WIN_CREATE(base, size, disp_unit, info, comm, win)</p><p>IN base initial address of window (choice)</p><p>IN size
size of window in bytes (non-negative integer)</p><p>IN
disp_unit
local unit size for displacements, in bytes (positive
integer)</p><p>IN
info
info argument (handle)</p><p>IN
comm
intra-communicator (handle)</p><p>OUT
win
window object (handle)</p></blockquote><p>其中，若<code>size</code>指定为<code>0</code>，则不会暴露内存。</p><p><code>disp_unit</code> 为缩放系数，一般而言指定为<code>0</code>（不缩放）或<code>sizeof(type)</code>。（标准中说在异构环境下也可正确的缩放）。但是我在<a class=link href=https://enccs.github.io/intermediate-mpi/one-sided-routines/#window-creation target=_blank rel=noopener>其他教程</a>可以看到代码中同时在<code>size</code> 和 <code>disp_unit</code> 中使用了 <code>sizeof(type)</code>。</p><p>不同进程创建的窗口在大小上可能是不同的，但是同一块内存可能映射到不同的窗口上。对重叠窗口的并发通信可能有未知的结果。</p><p>一个窗口可以在进程里的任意一块内存上被创建，但是，如果使用<code>MPI_ALLOC_MEM</code>来分配内存的性能表现会更好，在一些系统上使用字节对齐的内存也会有更好的性能。</p><h3 id=mpi_win_allocate>MPI_WIN_ALLOCATE</h3><blockquote><p>MPI_WIN_ALLOCATE(size, disp_unit, info, comm, baseptr, win)</p><p>IN size size of window in bytes (non-negative integer)</p><p>IN disp_unit local unit size for displacements, in bytes (positive integer)</p><p>IN info info argument (handle)</p><p>IN comm intra-communicator (handle)</p><p>OUT baseptr initial address of window (choice)</p><p>OUT win window object (handle)</p></blockquote><p><code>size</code> 为0依旧是有效的。</p><p>对于<code>MPI_ALLOC_MEM</code> 和 <code>MPI_FREE_MEM</code> 的准则也对这个函数有效。（这里的准则指的是这块内存你需要手动释放，并且<code>baseptr</code>的类型是<code>*void</code>）。</p><p>可以在<code>info</code>中设置内存对齐参数。</p><h3 id=mpi_win_allocate_shared>MPI_WIN_ALLOCATE_SHARED</h3><blockquote><p>MPI_WIN_ALLOCATE_SHARED(size, disp_unit, info, comm, baseptr, win)</p><p>IN
size
size of local window in bytes (non-negative integer)</p><p>IN
disp_unit
local unit size for displacements, in bytes (positive
integer)</p><p>IN
info
info argument (handle)</p><p>IN
comm
intra-communicator (handle)</p><p>OUT
baseptr
address of local allocated window segment (choice)</p><p>OUT
win
window object (handle)</p></blockquote><p>这里分配的内存是连续的并且是根据内存的秩（rank）排的，除非你在<code>info</code>里指定了<code>alloc_shared_noncontig</code>。如果你指定了这个参数，那么库会优化共享内存碎片的布局，可能会优化性能。</p><p>如果使用了连续内存，那么只有第一个进程的内存会被对齐。如果没用，那么每一个进程的内存都会被对齐。</p><h2 id=通信>通信</h2><p>所有的通信函数都是非阻塞的。</p><p>当源进程调用了一个同步过程或一个刷新过程时，操作结束。基于请求的操作会在源进程使用测试或等待（test or wait 我也不知道这是啥）过程时完成。</p><p>对于本地通信缓冲区的RMA操作只有在上一个操作结束后才会开始。</p><p>对于同一块内存的读写冲突会带来位置后果。但是同时的累加操作会顺利进行就好像他们是有序的一样。</p><p>你可以将<code>MPI_PROC_NULL</code>作为目标，但是依旧会用同步方法来关闭这个时期（epoch）</p><h2 id=内存模型>内存模型</h2><p>在理解内存模型前，先提出两个概念：公有内存和私有内存。我们假设公有内存是所有进程都可以访问的内存，容量大。私有内存是每个进程独有的内存，访问快。对于不同的机器，这两块内存可能是一致的，也可能不是。一致的内存布局允许我们直接更新公有内存。而不一致的内存需要额外的RMA操作来更新公有内存。因此针对这两种情况，MPI提出了两种内存模型，分别为<strong>RMA unified</strong>和<strong>RMA separate</strong>，可以通过<code>MPI_WIN_MODEL</code>来设置。</p><h3 id=separate-model>separate model</h3><p>在这种模型中，每个变量在进程内存里都只有一个实例，但是对于每个窗口而言都有多个公有备份。对于本地内存的更新操作会影响到其他窗口的公有备份。对于私有备份的更新操作也会影响到进程内存。</p><p><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.1.png width=872 height=552 srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.1_hu_75950ab0631c44ff.png 480w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.1_hu_a85944c912ac9a04.png 1024w" loading=lazy alt="seprate model" class=gallery-image data-flex-grow=157 data-flex-basis=379px></p><h3 id=unified-model>unified model</h3><p>私有和公有拷贝是相同的，不需要额外的RMA操作，允许用户忽略一些同步调用并隐形的提高性能。</p><p>需要架构上的支持。</p><h2 id=同步>同步</h2><p>RMA模型把通信分为了两种类型，如下：</p><blockquote><p><strong>active target communication</strong> 直译就是积极通信，在这种通信模式下，源进程和目标进程都会显式参与通信，通信方法分别为<code>fence</code> 和 <code>SPCW</code>。</p><p><strong>passive target communication</strong> 消极通信，这种模式下只有源进程会显示的参与通信，通信方法为<code>lock</code> 和 <code>lock_all</code>。</p></blockquote><h3 id=时期epoch>时期（epoch）</h3><p>在介绍同步之前，先介绍时期这个概念。RMA模型中所有的通信操作都必须在一个时期中进行。需要目标进程通过同步操作来暴露时期（exposure epoch）和源进程也需要一个同步操作来访问时期（access epoch）。</p><h3 id=pscwpost-start-complete-wait>PSCW(Post-Start-Complete-Wait)</h3><p>PSCW分别是四个不同的操作，目标进程使用Post的操作等价于打开一个暴露时期，而Wait等价于关闭这个暴露时期。源进程的Start则是打开一个访问时期，Complete 为关闭访问时期。
其具体流程用标准的一张图即可解释：</p><p><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.2.png width=920 height=839 srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.2_hu_d99f38c506ce9c9d.png 480w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.2_hu_8fe1fd5a75583b05.png 1024w" loading=lazy alt=12.2 class=gallery-image data-flex-grow=109 data-flex-basis=263px></p><p>这种post必须在start前，wait必须在complete后的模式称之为强同步（strong synchronization）。但是强同步一般太理想化，所以如果不遵循这个顺序的情况，称此为弱同步（weak synchronization）。如下图</p><p><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.3.png width=914 height=729 srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.3_hu_52c16686ab1de9b6.png 480w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.3_hu_c3274dbbceac6eea.png 1024w" loading=lazy alt=12.3 class=gallery-image data-flex-grow=125 data-flex-basis=300px></p><p>MPI允许弱同步模式。</p><h3 id=fence>Fence</h3><p>如果是在BSP范式下，编写PSCW显然十分封锁，但是我们还有另一个法宝——Fence！其差别和对比也可以用一张图来很好的表示（出自一位大牛的paper）</p><p><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/5.png width=1249 height=435 srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/5_hu_98a6b87af336df14.png 480w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/5_hu_2a8d92a6d65355c0.png 1024w" loading=lazy alt=5 class=gallery-image data-flex-grow=287 data-flex-basis=689px></p><h3 id=lock>Lock</h3><p>这里的锁和我们一般在多线程中的锁很像，但是lock操作等同于打开一个时期，并不会建立一个临界区！锁分为排他的（exculsive）和共享的（shared）。排他锁同时之会允许一个进程访问，而共享锁允许其他持有共享锁的进程访问目标进程。</p><p><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.4.png width=912 height=908 srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.4_hu_edd053ebf4480177.png 480w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/12.4_hu_587a3637c8484a22.png 1024w" loading=lazy alt=12.4 class=gallery-image data-flex-grow=100 data-flex-basis=241px></p><p>注意，两个源进程的顺序是不确定的！</p><p>如果使用锁，那么在时期内的所有RMA操作只会在解锁的时候完成，所以RMA在提供锁的同时，也提供了Flush操作，用来同步用。</p><p><img src=/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/6.png width=1212 height=443 srcset="/p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/6_hu_8688fee7a87193f6.png 480w, /p/mpi%E7%9A%84rma%E6%9C%BA%E5%88%B6%E7%AC%94%E8%AE%B0/6_hu_c9892e7265bb1fc1.png 1024w" loading=lazy alt=6 class=gallery-image data-flex-grow=273 data-flex-basis=656px></p><h2 id=参考>参考</h2><ol><li><a class=link href=https://htor.inf.ethz.ch/publications/img/MPI_RMA_and_advanced_MPI.pdf target=_blank rel=noopener>eth_pdf</a></li><li><a class=link href=https://enccs.github.io/intermediate-mpi/one-sided-routines/ target=_blank rel=noopener>enccs</a></li><li><a class=link href=https://htor.inf.ethz.ch/publications/img/mpi3-rma-overview-and-model.pdf target=_blank rel=noopener>paper</a></li><li><a class=link href=https://wgropp.cs.illinois.edu/courses/cs598-s16/lectures/lecture34.pdf target=_blank rel=noopener>wgropp.34</a></li><li><a class=link href=https://wgropp.cs.illinois.edu/courses/cs598-s16/lectures/lecture35.pdf target=_blank rel=noopener>wgropp.35</a></li><li><a class=link href=https://www.mpi-forum.org/docs/mpi-4.1/mpi41-report.pdf target=_blank rel=noopener>mpi-standard</a></li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/hpc/>Hpc</a>
<a href=/tags/mpi/>Mpi</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/%E8%87%AA%E5%AE%9A%E4%B9%89mpi%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/><div class=article-image><img src=/p/%E8%87%AA%E5%AE%9A%E4%B9%89mpi%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/119764162_p0.d405ddad707c04e46f2d9d05df6f5f81_hu_8770921ebfce3d7e.png width=250 height=150 loading=lazy alt="Featured image of post 自定义MPI的错误处理函数" data-hash="md5-1AXdrXB8BORvLZ0F329fgQ=="></div><div class=article-details><h2 class=article-title>自定义MPI的错误处理函数</h2></div></a></article><article class=has-image><a href=/p/mpi4.1%E6%A0%87%E5%87%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD/><div class=article-image><img src=/p/mpi4.1%E6%A0%87%E5%87%86%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD/119071465_p0.b7e9e7ca51486225845259f935d84625_hu_6442bb8cf1fdc6a1.png width=250 height=150 loading=lazy alt="Featured image of post MPI4.1标准的一些相关术语" data-hash="md5-t+nnylFIYiWEUln5NdhGJQ=="></div><div class=article-details><h2 class=article-title>MPI4.1标准的一些相关术语</h2></div></a></article><article class=has-image><a href=/p/%E5%89%8D%E7%BC%80%E5%92%8C%E7%AE%97%E6%B3%95%E5%8F%8A%E5%85%B6%E5%88%86%E6%AE%B5%E7%89%88%E6%9C%AC%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%8C%96%E6%96%B9%E6%B3%95/><div class=article-image><img src=/p/%E5%89%8D%E7%BC%80%E5%92%8C%E7%AE%97%E6%B3%95%E5%8F%8A%E5%85%B6%E5%88%86%E6%AE%B5%E7%89%88%E6%9C%AC%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%8C%96%E6%96%B9%E6%B3%95/120645705_p0.fe7ac6f205553ed6f08980839bf5f45d_hu_107bb1bf48ddf865.png width=250 height=150 loading=lazy alt="Featured image of post 前缀和算法及其分段版本的并行化方法" data-hash="md5-/nrG8gVVPtbwiYCDm/X0XQ=="></div><div class=article-details><h2 class=article-title>前缀和算法及其分段版本的并行化方法</h2></div></a></article><article class=has-image><a href=/p/stdexcution%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%85%B6%E5%9C%A8nvidia-gpu%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/><div class=article-image><img src=/p/stdexcution%E4%BB%8B%E7%BB%8D%E5%8F%8A%E5%85%B6%E5%9C%A8nvidia-gpu%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/119683453_p0.d9f1edbbf1443fa831a325b518a9898f_hu_4b324506154fbd04.jpg width=250 height=150 loading=lazy alt="Featured image of post std::excution介绍及其在nvidia gpu中的使用" data-hash="md5-2fHtu/FEP6gxoyW1GKmJjw=="></div><div class=article-details><h2 class=article-title>std::excution介绍及其在nvidia gpu中的使用</h2></div></a></article><article class=has-image><a href=/p/%E9%AB%98%E7%BB%B4%E5%8D%95%E7%BA%AF%E5%BD%A2%E4%B8%8A%E7%9A%84%E6%95%B0%E5%80%BC%E7%A7%AF%E5%88%86/><div class=article-image><img src=/p/%E9%AB%98%E7%BB%B4%E5%8D%95%E7%BA%AF%E5%BD%A2%E4%B8%8A%E7%9A%84%E6%95%B0%E5%80%BC%E7%A7%AF%E5%88%86/641b5c955b9cd5730ae8ddddfd706225161775300.6dcfc40cea58c72f9218b4d75fad9f3c_hu_7a46e2235308fd19.jpg width=250 height=150 loading=lazy alt="Featured image of post 高维单纯形上的数值积分" data-hash="md5-bc/EDOpYxy+SGLTXX62fPA=="></div><div class=article-details><h2 class=article-title>高维单纯形上的数值积分</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//woodman3.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2024 -
2026 木头人的小木屋</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>